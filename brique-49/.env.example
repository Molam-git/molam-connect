# Brique 49 - Taxes & Compliance
# Environment Configuration

# Server
PORT=8049
NODE_ENV=development

# Database
DATABASE_URL=postgresql://postgres:password@localhost:5432/molam_taxes

# Molam ID (JWT Authentication)
MOLAM_ID_JWT_PUBLIC="-----BEGIN PUBLIC KEY-----\nYOUR_RS256_PUBLIC_KEY_HERE\n-----END PUBLIC KEY-----"

# Storage (S3 WORM for fiscal reports)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_access_key
AWS_SECRET_ACCESS_KEY=your_secret_key
S3_BUCKET_FISCAL_REPORTS=molam-fiscal-reports-prod
S3_OBJECT_LOCK_ENABLED=true

# Option: Local filesystem (development)
USE_LOCAL_STORAGE=true
LOCAL_STORAGE_PATH=./storage/fiscal_reports

# Tax Computation
TAX_COMPUTE_BATCH_SIZE=200
TAX_COMPUTE_INTERVAL_MS=5000

# HSM/Vault (for signing fiscal reports)
HSM_ENABLED=false
HSM_KEY_ID=fiscal-signing-key
VAULT_URL=http://localhost:8200

# FX Rates
FX_FALLBACK_RATE=1.0

# Worker Configuration
WORKER_ID=tax-worker-1
WORKER_ENABLED=true

# Metrics
METRICS_ENABLED=true
METRICS_PORT=9099

# Logging
LOG_LEVEL=info
LOG_FORMAT=json

# Security
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
SKIP_JWT_VERIFICATION=false

# Compliance
FISCAL_REPORT_RETENTION_YEARS=7
AUDIT_LOGS_ENABLED=true
