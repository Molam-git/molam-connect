# Brique 48 - Radar Molam (Fraud & Risk Engine)
# Environment Configuration

# Server
PORT=8048
NODE_ENV=development

# Database
DATABASE_URL=postgresql://postgres:password@localhost:5432/molam_radar

# Molam ID (JWT Authentication)
MOLAM_ID_JWT_PUBLIC="-----BEGIN PUBLIC KEY-----\nYOUR_RS256_PUBLIC_KEY_HERE\n-----END PUBLIC KEY-----"

# SIRA Integration (Brique 44 - ML Risk Scoring)
SIRA_URL=http://localhost:8044
SIRA_ENABLED=true
MOCK_SIRA=false

# Risk Engine Configuration
RISK_ENGINE_ENABLED=true
RISK_EVALUATION_TIMEOUT_MS=100
DEFAULT_DECISION=allow

# ML Thresholds (SIRA scores 0-100)
ML_SCORE_BLOCK_THRESHOLD=90
ML_SCORE_REVIEW_THRESHOLD=70
ML_SCORE_ALLOW_THRESHOLD=50

# Velocity Limits (per merchant)
VELOCITY_1H_THRESHOLD=50
VELOCITY_24H_THRESHOLD=500
VELOCITY_7D_THRESHOLD=2000

# Amount Thresholds
HIGH_AMOUNT_THRESHOLD_USD=1000
CRITICAL_AMOUNT_THRESHOLD_USD=10000

# Device Fingerprinting
DEVICE_FINGERPRINT_ENABLED=true
DEVICE_FINGERPRINT_PROVIDER=fingerprint.js

# Geolocation
IP_GEOLOCATION_ENABLED=true
IP_GEOLOCATION_API_KEY=your_api_key

# Webhooks Integration (Brique 45)
WEBHOOKS_API_URL=http://localhost:8045
WEBHOOK_ENABLED=true

# Metrics
METRICS_ENABLED=true
METRICS_PORT=9098

# Logging
LOG_LEVEL=info
LOG_FORMAT=json

# Alert Processing
ALERT_PROCESSOR_ENABLED=true
ALERT_POLL_INTERVAL_MS=5000
ALERT_CRITICAL_SLACK_WEBHOOK=https://hooks.slack.com/services/YOUR/WEBHOOK

# Security
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=1000

# Testing
SKIP_JWT_VERIFICATION=false
