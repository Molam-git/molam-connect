# ============================================================================
# Brique 41 - Molam Connect
# Environment Configuration
# ============================================================================

# ============================================================================
# Server Configuration
# ============================================================================
NODE_ENV=development
PORT=8041
CORS_ORIGIN=*

# ============================================================================
# Database Configuration (PostgreSQL)
# ============================================================================
DATABASE_URL=postgresql://user:password@localhost:5432/molam_connect

# ============================================================================
# Molam ID Authentication (JWT RS256)
# ============================================================================
# Public key for verifying Molam ID JWT tokens
# Format: RS256 public key with \n for line breaks
MOLAM_ID_JWT_PUBLIC="-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA...\n-----END PUBLIC KEY-----"

# ============================================================================
# Integration avec autres briques Molam
# ============================================================================

# Wallet Service (Brique 33)
WALLET_URL=http://localhost:8033

# Treasury Service (Briques 34-35)
TREASURY_URL=http://localhost:8034

# ============================================================================
# Security & Rate Limiting
# ============================================================================
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=600

# ============================================================================
# Workers & Background Jobs
# ============================================================================
# How often to run verification sync (cron format)
VERIFICATION_SYNC_INTERVAL="0 */1 * * *"  # Every hour

# How often to run events dispatcher (cron format)
EVENTS_DISPATCH_INTERVAL="*/5 * * * *"   # Every 5 minutes

# ============================================================================
# Logging & Monitoring
# ============================================================================
LOG_LEVEL=info
SENTRY_DSN=

# ============================================================================
# Feature Flags
# ============================================================================
ENABLE_WEBHOOK_RETRIES=true
ENABLE_AUTO_VERIFICATION_SYNC=true
ENABLE_VOLUME_DISCOUNTS=false

# ============================================================================
# Compliance & Limits
# ============================================================================
# Default payout limits (in account's default currency)
DEFAULT_DAILY_PAYOUT_LIMIT=100000
DEFAULT_MONTHLY_PAYOUT_LIMIT=1000000

# ============================================================================
# Development & Testing
# ============================================================================
# Skip JWT verification in development (DANGEROUS - only for local dev)
SKIP_JWT_VERIFICATION=false

# Mock external services (for testing without Wallet/Treasury)
MOCK_WALLET_SERVICE=false
MOCK_TREASURY_SERVICE=false
