# =====================================================================
# Brique 98 â€” Environment Variables
# =====================================================================

# Node Environment
NODE_ENV=development

# Server
PORT=8098
API_URL=http://localhost:8098

# Database (PostgreSQL)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=molam_offline
POSTGRES_USER=molam
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_POOL_MAX=20

# Redis (for nonce tracking - optional, uses in-memory if not set)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=2

# JWT Authentication
JWT_SECRET=your_jwt_secret_here_change_in_production

# AWS KMS (for encryption)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
KMS_KEY_ID=alias/molam-offline

# Use real KMS in production
USE_REAL_KMS=false

# Mock KMS password (development only)
MOCK_KMS_PASSWORD=dev-only-insecure-key

# SIRA Integration (Brique 94)
SIRA_API_URL=http://localhost:8094
SIRA_API_KEY=your_sira_api_key
ENABLE_SIRA_SCORING=true

# SIRA Risk Thresholds
SIRA_ACCEPT_BELOW=0.15
SIRA_REVIEW_ABOVE=0.15
SIRA_QUARANTINE_ABOVE=0.35

# Reconciliation Worker
WORKER_MODE=once
BATCH_SIZE=10
POLL_INTERVAL_MS=5000
ENABLE_LEDGER_CREATION=true

# Security
MAX_CLOCK_SKEW_MINUTES=30
MAX_BUNDLE_AGE_HOURS=72

# Default Policies
DEFAULT_MAX_OFFLINE_AMOUNT=100000
DEFAULT_MAX_OFFLINE_PER_DEVICE_PER_DAY=50

# Logging
LOG_LEVEL=info
LOG_FORMAT=json

# Feature Flags
ENABLE_OFFLINE_PAYMENTS=true
ENABLE_QR_PAYMENTS=true
ENABLE_USSD_PAYMENTS=true

# HTTPS Enforcement (production only)
ENFORCE_HTTPS=false

# Monitoring
ENABLE_METRICS=true
METRICS_PORT=9098
