apiVersion: v1
kind: ConfigMap
metadata:
  name: molam-connect-config
  namespace: molam-connect
data:
  # Server
  NODE_ENV: "production"
  PORT: "3000"
  HOST: "0.0.0.0"

  # Database
  DB_HOST: "postgres-service"
  DB_PORT: "5432"
  DB_NAME: "molam_connect"
  DB_USER: "postgres"
  DB_POOL_MIN: "2"
  DB_POOL_MAX: "20"

  # Redis
  REDIS_HOST: "redis-service"
  REDIS_PORT: "6379"
  REDIS_DB: "0"

  # OTP
  OTP_LENGTH: "6"
  OTP_TTL_SECONDS: "300"
  OTP_MAX_ATTEMPTS: "3"

  # Risk thresholds
  RISK_THRESHOLD_3DS2_REQUIRED: "80"
  RISK_THRESHOLD_OTP_REQUIRED: "50"
  RISK_THRESHOLD_LOW_FRICTION: "30"

  # Rate Limiting
  RATE_LIMIT_WINDOW_MS: "60000"
  RATE_LIMIT_MAX_REQUESTS: "100"

  # Logging
  LOG_LEVEL: "info"
  LOG_PRETTY: "false"

  # Metrics
  METRICS_ENABLED: "true"
  METRICS_PORT: "9090"

  # Development/Production toggles
  MOCK_SIRA: "false"
  MOCK_BIN_LOOKUP: "false"
  MOCK_SMS: "false"
  TEST_MODE: "false"

  # CORS
  CORS_ORIGIN: "https://pay.molam.io,https://dashboard.molam.io"
  CORS_CREDENTIALS: "true"
