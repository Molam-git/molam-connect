# =====================================================================
# Brique 83 â€” SIRA Insights Environment Configuration
# =====================================================================

# PostgreSQL Database
PGHOST=localhost
PGPORT=5432
PGDATABASE=molam_connect
PGUSER=postgres
PGPASSWORD=your_secure_password
DATABASE_URL=postgresql://postgres:your_password@localhost:5432/molam_connect

# Redis (Feature caching)
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Kafka (Feature ingestion)
KAFKA_BROKERS=localhost:9092,localhost:9093
KAFKA_GROUP_ID=sira-consumer
KAFKA_TOPIC_FEATURES=wallet_txn_created,merchant_events

# AWS S3 (Model artifacts)
S3_BUCKET=molam-sira-models
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_access_key
AWS_SECRET_ACCESS_KEY=your_secret_key
S3_KMS_KEY_ID=alias/sira-models

# SIRA Configuration
SIRA_MIN_AUC=0.90              # Minimum AUC for production promotion
SIRA_AUTO_PROMOTE=0            # 0=manual approval, 1=auto-promote
SIRA_CACHE_TTL=30              # Feature cache TTL (seconds)
SIRA_SNAPSHOT_TTL=3600         # Snapshot cache TTL (seconds)
SIRA_MAX_FEATURES=1000         # Max features per entity

# Inference Service
INFERENCE_HOST=0.0.0.0
INFERENCE_PORT=8000
INFERENCE_WORKERS=4
INFERENCE_MAX_BATCH_SIZE=100

# Training Configuration
TRAINING_DATA_DAYS=90          # Training dataset window (days)
TRAINING_VALIDATION_SPLIT=0.2
TRAINING_N_ESTIMATORS=200
TRAINING_LEARNING_RATE=0.05
TRAINING_MAX_DEPTH=7

# Model Monitoring
DRIFT_DETECTION_WINDOW=7       # Days for drift detection
DRIFT_KL_THRESHOLD=0.1         # KL divergence threshold
PERFORMANCE_ALERT_THRESHOLD=0.85  # Minimum AUC to avoid alert

# Security
JWT_SECRET=your_jwt_secret_key
JWT_ALGORITHM=HS256
JWT_EXPIRATION=24h

# Ops Authorization
SIRA_ADMIN_ROLE=sira_admin
FINANCE_OPS_ROLE=finance_ops
PAY_ADMIN_ROLE=pay_admin

# Monitoring
PROMETHEUS_PORT=9090
ENABLE_METRICS=true
LOG_LEVEL=info
LOG_FORMAT=json

# Airflow (Orchestration)
AIRFLOW_HOME=/opt/airflow
AIRFLOW_DATABASE_URL=postgresql://airflow:password@localhost:5432/airflow
AIRFLOW_EXECUTOR=LocalExecutor

# Feature Engineering
FEATURE_SNAPSHOT_CRON=0 */6 * * *   # Every 6 hours
RETRAINING_CRON=0 2 * * 0           # Weekly at 2 AM Sunday

# Development
NODE_ENV=production
PYTHON_ENV=production
DEBUG=false
