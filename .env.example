# =============================================================================
# MOLAM CONNECT - Global Configuration
# =============================================================================

# Server Configuration
NODE_ENV=development
PORT=3000
HOST=0.0.0.0
API_BASE_URL=http://localhost:3000

# Database Configuration (PostgreSQL)
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/molam_connect
DB_POOL_MIN=2
DB_POOL_MAX=20

# Redis Configuration (for caching and rate limiting)
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0

# =============================================================================
# SECURITY
# =============================================================================

# JWT & Secrets
JWT_SECRET=your_super_secret_jwt_key_change_in_production_minimum_32_characters
JWT_EXPIRES_IN=24h

# API Keys
MOLAM_SECRET_KEY=sk_test_your_secret_key_here
MOLAM_PUBLISHABLE_KEY=pk_test_your_publishable_key_here

# Encryption (for sensitive data)
ENCRYPTION_KEY=your_32_character_encryption_key_here_change_this

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================

# SIRA Risk Scoring Service
SIRA_API_URL=http://localhost:3002
SIRA_API_KEY=sira_test_key
SIRA_TIMEOUT_MS=500

# BIN Lookup Service
BIN_LOOKUP_API_URL=http://localhost:3003
BIN_LOOKUP_API_KEY=bin_test_key
BIN_LOOKUP_CACHE_TTL_SECONDS=86400

# =============================================================================
# SMS/VOICE PROVIDERS
# =============================================================================

# Twilio (SMS & Voice - Global)
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_FROM_NUMBER=+1234567890
VOICE_FROM_NUMBER=+1234567890

# Orange SMS (West Africa)
ORANGE_SMS_API_URL=https://api.orange.com/sms/v1
ORANGE_SMS_CLIENT_ID=your_orange_client_id
ORANGE_SMS_CLIENT_SECRET=your_orange_client_secret

# =============================================================================
# OTP CONFIGURATION
# =============================================================================

OTP_LENGTH=6
OTP_TTL_SECONDS=300
OTP_MAX_ATTEMPTS=3
OTP_RATE_LIMIT_WINDOW_SECONDS=3600
OTP_RATE_LIMIT_MAX_REQUESTS=5

# =============================================================================
# AUTHENTICATION THRESHOLDS
# =============================================================================

# Risk score thresholds (0-100)
RISK_THRESHOLD_3DS2_REQUIRED=80
RISK_THRESHOLD_OTP_REQUIRED=50
RISK_THRESHOLD_LOW_FRICTION=30

# 3DS2 Configuration
THREEDS2_ACS_TIMEOUT_MS=30000
THREEDS2_FALLBACK_TO_OTP=true

# Device Trust
DEVICE_TRUST_ENABLED=true
DEVICE_TRUST_DURATION_DAYS=90

# =============================================================================
# RATE LIMITING
# =============================================================================

# Global API rate limits
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# Per-endpoint limits (tighter)
RATE_LIMIT_AUTH_WINDOW_MS=60000
RATE_LIMIT_AUTH_MAX_REQUESTS=20

# =============================================================================
# LOGGING & MONITORING
# =============================================================================

# Logging
LOG_LEVEL=info
LOG_PRETTY=true

# Metrics (Prometheus)
METRICS_ENABLED=true
METRICS_PORT=9090

# =============================================================================
# WEBHOOK CONFIGURATION
# =============================================================================

WEBHOOK_SECRET=whsec_your_webhook_signing_secret
WEBHOOK_MAX_RETRIES=3
WEBHOOK_RETRY_DELAY_MS=5000

# =============================================================================
# IDEMPOTENCY
# =============================================================================

IDEMPOTENCY_CACHE_TTL_SECONDS=86400
IDEMPOTENCY_ENABLED=true

# =============================================================================
# CORS & SECURITY HEADERS
# =============================================================================

CORS_ORIGIN=http://localhost:3000,http://localhost:8080,http://localhost:5173
CORS_CREDENTIALS=true

# Helmet Security
HELMET_ENABLED=true

# =============================================================================
# FRONTEND / CLIENT CONFIGURATION
# =============================================================================

# Web SDK
CLIENT_SDK_URL=http://localhost:3000/sdk/molam-form.js

# Test Dashboard
DASHBOARD_URL=http://localhost:3000/dashboard

# =============================================================================
# PAYMENT PROVIDERS (Future)
# =============================================================================

# Stripe (for card processing)
STRIPE_SECRET_KEY=sk_test_your_stripe_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_key

# Mobile Money Providers
ORANGE_MONEY_API_KEY=
WAVE_API_KEY=
MTN_MOMO_API_KEY=

# =============================================================================
# DEVELOPMENT / TESTING
# =============================================================================

# Mock external services in development
MOCK_SIRA=true
MOCK_BIN_LOOKUP=true
MOCK_SMS=false
MOCK_VOICE=false

# Test mode (skip actual payment processing)
TEST_MODE=true

# Debug
DEBUG=molam:*
