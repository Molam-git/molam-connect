# =====================================================================
# Brique 84 â€” Payouts Engine Environment Configuration
# =====================================================================

# PostgreSQL Database
PGHOST=localhost
PGPORT=5432
PGDATABASE=molam_connect
PGUSER=postgres
PGPASSWORD=your_secure_password
DATABASE_URL=postgresql://postgres:your_password@localhost:5432/molam_connect

# Redis (Caching)
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Server Configuration
PORT=3000
NODE_ENV=production
LOG_LEVEL=info
LOG_FORMAT=json

# Worker Configuration
WORKER_POLL_INTERVAL_MS=5000       # Poll interval for pending payouts (5 seconds)
WORKER_BATCH_SIZE=10               # Number of payouts to process per batch
WORKER_CONCURRENCY=5               # Max concurrent payout processing
WORKER_ENABLE_PRIORITY=true        # Enable priority-based processing
WORKER_ENABLE_SLA_MONITORING=true  # Enable SLA violation monitoring

# Bank Connectors

# ACH Connector (US)
ACH_BASE_URL=https://api.achbank.example.com
ACH_API_KEY=your_ach_api_key
ACH_CUTOFF_TIME_ET=15             # 3 PM ET for same-day ACH

# Wire Connector (US Fedwire / International SWIFT)
WIRE_BASE_URL=https://api.wirebank.example.com
WIRE_API_KEY=your_wire_api_key
WIRE_CUTOFF_TIME_ET=17            # 5 PM ET for same-day wire

# SEPA Connector (European Payments)
SEPA_BASE_URL=https://api.sepa.example.com
SEPA_API_KEY=your_sepa_api_key
SEPA_CUTOFF_TIME_CET=18           # 6 PM CET for SEPA

# Faster Payments (UK)
FP_BASE_URL=https://api.fasterpayments.example.com
FP_API_KEY=your_fp_api_key

# Mobile Money (Africa)
MM_BASE_URL=https://api.mobilemoney.example.com
MM_API_KEY=your_mm_api_key

# SIRA Integration (AI-driven routing)
SIRA_ENABLED=true
SIRA_BASE_URL=http://localhost:8000
SIRA_MODEL_NAME=payout-router-v1

# Treasury Integration (Brique 34)
TREASURY_ENABLED=true
TREASURY_BASE_URL=http://localhost:3001
TREASURY_API_KEY=your_treasury_api_key

# Reconciliation Integration (Brique 86)
RECONCILIATION_ENABLED=true
RECONCILIATION_BASE_URL=http://localhost:3002
RECONCILIATION_API_KEY=your_reconciliation_api_key

# Payout Limits & Thresholds
HIGH_VALUE_THRESHOLD=10000          # Alert threshold for high-value payouts
MAX_PAYOUT_AMOUNT=10000000         # Maximum payout amount ($10M)
MIN_PAYOUT_AMOUNT=0.01             # Minimum payout amount

# Retry Configuration
DEFAULT_MAX_RETRIES=3
RETRY_BASE_DELAY_SECONDS=60        # Base delay for exponential backoff (1 minute)

# Hold Configuration
HOLD_EXPIRY_DAYS=7                 # Days before auto-reversing holds

# SLA Configuration
DEFAULT_PROCESSING_DAYS=1
DEFAULT_SETTLEMENT_DAYS=2

# Security
JWT_SECRET=your_jwt_secret_key
JWT_ALGORITHM=HS256
JWT_EXPIRATION=24h

# RBAC Roles
MERCHANT_ADMIN_ROLE=merchant_admin
FINANCE_OPS_ROLE=finance_ops
TREASURY_OPS_ROLE=treasury_ops
BILLING_OPS_ROLE=billing_ops

# Monitoring
PROMETHEUS_PORT=9090
ENABLE_METRICS=true

# Alerting
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
PAGERDUTY_API_KEY=your_pagerduty_api_key
ALERT_EMAIL=ops@molam.com

# Development
DEBUG=false
ENABLE_MOCK_CONNECTORS=false       # Use mock connectors for testing
