# =============================================================================
# Brique 138ter - Cooperative Failover Mesh Configuration
# =============================================================================

# Server Configuration
PORT=3138
NODE_ENV=production
LOG_LEVEL=info

# Database (PostgreSQL)
DATABASE_URL=postgresql://user:password@localhost:5432/molam_connect

# Kafka (for mesh communication)
KAFKA_BROKERS=localhost:9092
KAFKA_CLIENT_ID=cooperative-failover-mesh
KAFKA_GROUP_ID=mesh-controller

# Mesh Topics
KAFKA_TOPIC_HEALTH=mesh.health
KAFKA_TOPIC_PREDICTIONS=mesh.predictions
KAFKA_TOPIC_PROPOSALS=mesh.proposals
KAFKA_TOPIC_ACTIONS=mesh.actions

# SIRA Integration
SIRA_API_URL=http://localhost:8000
SIRA_SIGNING_KEY=your-sira-signing-key-here
SIRA_FALLBACK_ENABLED=true

# Mesh Configuration
MESH_REGION=CEDEAO
ENABLE_CONTROLLER=true

# Policy Defaults
DEFAULT_POLICY_MODE=approval_required
DEFAULT_AUTO_CONFIDENCE_THRESHOLD=0.85
DEFAULT_MAX_CASCADING_DEPTH=3

# Routing Configuration
ROUTING_PROPOSAL_TTL_HOURS=24
ROUTING_SIMULATION_ENABLED=true

# Reconciliation
RECONCILIATION_WINDOW_HOURS=24
ROLLBACK_ALLOWED_WINDOW_HOURS=24

# Authentication (for mesh API endpoints)
JWT_SECRET=your-jwt-secret-here
JWT_ISSUER=molam-mesh
JWT_AUDIENCE=molam-connect

# CORS
CORS_ORIGIN=http://localhost:3000,https://ops.molam.io

# Prometheus Metrics
METRICS_ENABLED=true

# Health Check Configuration
HEALTH_CHECK_INTERVAL_MINUTES=5
PREDICTION_WINDOW_MINUTES=60

# Multi-sig Configuration (for approvals)
MULTISIG_APPROVALS_URL=http://localhost:3136
