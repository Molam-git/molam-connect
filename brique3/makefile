# Makefile pour Molam Pay Brique 3

.PHONY: help db-up db-down db-init db-reset dev test

help:
	@echo "Commandes disponibles:"
	@echo "  make db-up     - DÃ©marrer les services Docker"
	@echo "  make db-down   - ArrÃªter les services Docker"
	@echo "  make db-init   - Initialiser la base de donnÃ©es"
	@echo "  make db-reset  - RÃ©initialiser la base de donnÃ©es"
	@echo "  make dev       - DÃ©marrer en mode dÃ©veloppement"
	@echo "  make test      - ExÃ©cuter les tests"

db-up:
	@echo "ğŸ”„ DÃ©marrage des services Docker..."
	docker-compose up -d
	@echo "âœ… Services Docker dÃ©marrÃ©s"
	@sleep 5
	@echo "ğŸ“Š Adminer disponible sur: http://localhost:8081"

db-down:
	@echo "ğŸ›‘ ArrÃªt des services Docker..."
	docker-compose down
	@echo "âœ… Services Docker arrÃªtÃ©s"

db-init:
	@echo "ğŸ—ƒï¸  Initialisation de la base de donnÃ©es..."
	npm run db:init

db-reset:
	@echo "ğŸ”„ RÃ©initialisation de la base de donnÃ©es..."
	npm run db:reset

dev:
	@echo "ğŸš€ DÃ©marrage en mode dÃ©veloppement..."
	npm run dev

test:
	@echo "ğŸ§ª ExÃ©cution des tests..."
	npm test

logs:
	@echo "ğŸ“‹ Affichage des logs Docker..."
	docker-compose logs -f

status:
	@echo "ğŸ“Š Statut des services:"
	docker-compose ps

# DÃ©ploiement de la structure complÃ¨te
setup: db-up db-init
	@echo "ğŸ‰ Setup complet terminÃ©!"
	@echo "ğŸ“Š Adminer: http://localhost:8081"
	@echo "ğŸš€ API: http://localhost:8080"