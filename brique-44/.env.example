# ============================================================================
# Brique 44 - Anti-fraude Temps RÃ©el
# Environment Configuration
# ============================================================================

# ============================================================================
# Server Configuration
# ============================================================================
NODE_ENV=development
PORT=8044
CORS_ORIGIN=*

# ============================================================================
# Database Configuration (PostgreSQL)
# ============================================================================
DATABASE_URL=postgresql://user:password@localhost:5432/molam_fraud

# ============================================================================
# Molam ID Authentication (JWT RS256)
# ============================================================================
# Public key for verifying Molam ID JWT tokens
MOLAM_ID_JWT_PUBLIC="-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA...\n-----END PUBLIC KEY-----"

# ============================================================================
# SIRA Integration (Risk Scoring AI)
# ============================================================================
SIRA_URL=http://localhost:8050
SIRA_API_KEY=
MOCK_SIRA=false

# ============================================================================
# Kafka Configuration (Real-time Events)
# ============================================================================
KAFKA_BROKERS=localhost:9092,localhost:9093
KAFKA_CLIENT_ID=molam-fraud
KAFKA_GROUP_ID=fraud-evaluation
KAFKA_TOPIC_TXN_CREATED=checkout.txn_created
KAFKA_TOPIC_FRAUD_DECISION=fraud.decision

# ============================================================================
# Fraud Detection Thresholds
# ============================================================================
FRAUD_THRESHOLD_ALLOW=59
FRAUD_THRESHOLD_REVIEW=60
FRAUD_THRESHOLD_BLOCK=80

# Velocity limits (per hour)
FRAUD_VELOCITY_USER_LIMIT=10
FRAUD_VELOCITY_MERCHANT_LIMIT=100

# Amount thresholds (USD equivalent)
FRAUD_AMOUNT_HIGH=5000
FRAUD_AMOUNT_VERY_HIGH=15000

# ============================================================================
# Security & Rate Limiting
# ============================================================================
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=1000

# ============================================================================
# Logging & Monitoring
# ============================================================================
LOG_LEVEL=info
SENTRY_DSN=

# ============================================================================
# Feature Flags
# ============================================================================
ENABLE_KAFKA_CONSUMER=true
ENABLE_SIRA_INTEGRATION=true
ENABLE_REAL_TIME_SCORING=true
ENABLE_AUTO_BLACKLIST=false

# ============================================================================
# Development & Testing
# ============================================================================
# Skip JWT verification in development (DANGEROUS - only for local dev)
SKIP_JWT_VERIFICATION=false

# Mock external services
MOCK_KAFKA=false
