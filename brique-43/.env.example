# ============================================================================
# Brique 43 - Checkout & Payment Methods Orchestration
# Environment Configuration
# ============================================================================

# ============================================================================
# Server Configuration
# ============================================================================
NODE_ENV=development
PORT=8043
CORS_ORIGIN=*

# ============================================================================
# Database Configuration (PostgreSQL)
# ============================================================================
DATABASE_URL=postgresql://user:password@localhost:5432/molam_checkout

# ============================================================================
# Molam ID Authentication (JWT RS256)
# ============================================================================
# Public key for verifying Molam ID JWT tokens
# Format: RS256 public key with \n for line breaks
MOLAM_ID_JWT_PUBLIC="-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA...\n-----END PUBLIC KEY-----"

# ============================================================================
# Encryption (Payment Method Vault)
# ============================================================================
# 32-byte key for AES-256-GCM encryption (base64-encoded 44 characters)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
VAULT_DATA_KEY="base64-encoded-32-byte-key-here"

# ============================================================================
# Integration avec autres briques Molam
# ============================================================================

# Wallet Service (Brique 33)
WALLET_URL=http://localhost:8033

# Treasury Service (Briques 34-35)
TREASURY_URL=http://localhost:8034

# SIRA Service (Risk Scoring)
SIRA_URL=http://localhost:8050
SIRA_API_KEY=

# ============================================================================
# Security & Rate Limiting
# ============================================================================
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=800

# ============================================================================
# Logging & Monitoring
# ============================================================================
LOG_LEVEL=info
SENTRY_DSN=

# ============================================================================
# Feature Flags
# ============================================================================
ENABLE_3DS=true
ENABLE_WALLET_OTP=true
ENABLE_BANK_ROUTING=true

# ============================================================================
# Development & Testing
# ============================================================================
# Skip JWT verification in development (DANGEROUS - only for local dev)
SKIP_JWT_VERIFICATION=false

# Mock external services (for testing without dependencies)
MOCK_SIRA_SERVICE=false
MOCK_ACQUIRER=false
