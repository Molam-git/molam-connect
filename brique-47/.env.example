# ============================================================================
# Brique 47 - Disputes & Chargebacks
# Environment Configuration
# ============================================================================

# ============================================================================
# Server Configuration
# ============================================================================
NODE_ENV=development
PORT=8047
CORS_ORIGIN=*

# ============================================================================
# Database Configuration (PostgreSQL)
# ============================================================================
DATABASE_URL=postgresql://user:password@localhost:5432/molam_disputes

# ============================================================================
# Molam ID Authentication (JWT RS256)
# ============================================================================
MOLAM_ID_JWT_PUBLIC="-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA...\n-----END PUBLIC KEY-----"

# ============================================================================
# S3 Configuration (Evidence WORM Storage)
# ============================================================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
S3_BUCKET_EVIDENCE=molam-dispute-evidence-production

# Alternatively, use local file storage for development
USE_LOCAL_STORAGE=true
LOCAL_STORAGE_PATH=./storage/evidence

# ============================================================================
# SIRA Integration (AI Fraud Scoring)
# ============================================================================
SIRA_URL=http://localhost:9000
SIRA_API_KEY=
# Mock SIRA for development
MOCK_SIRA=true

# ============================================================================
# Webhooks Integration (Brique 45)
# ============================================================================
WEBHOOKS_SERVICE_URL=http://localhost:8045

# ============================================================================
# Billing Integration (Brique 46)
# ============================================================================
BILLING_SERVICE_URL=http://localhost:8046

# ============================================================================
# Treasury Integration (Brique 34-35)
# ============================================================================
TREASURY_SERVICE_URL=http://localhost:8034

# ============================================================================
# Network/Acquirer Credentials (mTLS)
# ============================================================================
# Visa, Mastercard, etc. credentials for ingest endpoint
ACQUIRER_VISA_PUBLIC_KEY=
ACQUIRER_MC_PUBLIC_KEY=
# Signature verification
ENABLE_SIGNATURE_VERIFICATION=true

# ============================================================================
# Disputes Configuration
# ============================================================================
# SLA for evidence submission (days)
DEFAULT_EVIDENCE_SLA_DAYS=5

# Dispute fee (USD)
DEFAULT_DISPUTE_FEE=15.00

# Auto-assign high-priority disputes
AUTO_ASSIGN_HIGH_PRIORITY=true

# SIRA score threshold for high priority
HIGH_PRIORITY_SCORE_THRESHOLD=80

# Amount threshold for high priority (USD)
HIGH_PRIORITY_AMOUNT_THRESHOLD=1000

# ============================================================================
# Security & Rate Limiting
# ============================================================================
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=1000

# ============================================================================
# Logging & Monitoring
# ============================================================================
LOG_LEVEL=info
SENTRY_DSN=

# ============================================================================
# Development & Testing
# ============================================================================
# Skip JWT verification in development (DANGEROUS - only for local dev)
SKIP_JWT_VERIFICATION=false

# Mock external services
MOCK_WEBHOOKS_SERVICE=false
MOCK_BILLING_SERVICE=false
MOCK_TREASURY_SERVICE=false
